// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  // unique Id
  userId    String   @id @unique
  firstName String
  lastName  String
  email     String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Workspaces {
  id        Int      @id @default(autoincrement())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
  ownerId   String
  isDefault Boolean  @default(false)
}

// fine-tuned AI models
model ContentType {
  id          Int         @id @default(autoincrement())
  name        String
  description String
  // default order that the model is displayed in the UI
  position    Int?        @default(0)
  // TODO: update default rules
  rules       Json?       @default("{}")
  isLive      Boolean     @default(true)
  parameters  Parameter[]
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @default(now())
}

model Parameter {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  displayLabel String
  isRequired   Boolean       @default(false)
  rules        Json?         @default("{}")
  placeholder  String?
  // displayType cannot be null
  displayType  DisplayType   @default(TEXT)
  options      Json?         @default("[]")
  position     Int?          @default(0)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @default(now())
  contentTypes ContentType[]
}

enum DisplayType {
  TEXT
  TEXTAREA
  SELECT
  RADIO
  CHECKBOX
}
